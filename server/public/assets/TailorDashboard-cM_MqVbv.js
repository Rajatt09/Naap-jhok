import{u as g,r as a,j as e,L as b}from"./index-CJV30WCN.js";import{O as N}from"./Dashboard-D51m91It.js";import{a as f}from"./orders-ByYhEa-D.js";const C=()=>{const{currentUser:O}=g(),[t,l]=a.useState([]),[o,h]=a.useState(!0),[c,d]=a.useState("pending"),[x,u]=a.useState(null);a.useEffect(()=>{(async()=>{try{h(!0);const r=await f();l(r)}catch(r){console.error("Error fetching orders:",r),u(r.message||"Failed to load orders")}finally{h(!1)}})()},[]);const p=s=>{l(r=>r.map(n=>(n==null?void 0:n._id)===(s==null?void 0:s._id)?s:n))},i=t.filter(s=>s.status==="placed"),j=t.filter(s=>["accepted","in-progress","ready"].includes(s.status)),m=t.filter(s=>["delivered","rejected"].includes(s.status)),v=()=>{switch(c){case"pending":return i;case"active":return j;case"completed":return m;default:return[]}};return o?e.jsx(b,{}):e.jsxs("div",{className:"dashboard-container",children:[e.jsxs("div",{className:"dashboard-header",children:[e.jsx("h1",{children:"Tailor Dashboard"}),e.jsx("p",{className:"subtitle",children:"Manage your shop and orders"})]}),x&&e.jsx("div",{className:"alert alert-error",role:"alert",children:x}),e.jsxs("div",{className:"dashboard-stats",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:i.length}),e.jsx("p",{children:"New Orders"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:j.length}),e.jsx("p",{children:"Active Orders"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("h3",{children:m.length}),e.jsx("p",{children:"Completed"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsxs("h3",{children:["â‚¹",t.reduce((s,r)=>s+r.price,0)]}),e.jsx("p",{children:"Total Revenue"})]})]}),e.jsxs("div",{className:"dashboard-section",children:[e.jsxs("div",{className:"section-header with-tabs",children:[e.jsx("h2",{children:"Orders"}),e.jsxs("div",{className:"tabs",children:[e.jsxs("button",{className:`tab ${c==="pending"?"active":""}`,onClick:()=>d("pending"),children:["New Orders",i.length>0&&e.jsx("span",{className:"badge",children:i.length})]}),e.jsx("button",{className:`tab ${c==="active"?"active":""}`,onClick:()=>d("active"),children:"In Progress"}),e.jsx("button",{className:`tab ${c==="completed"?"active":""}`,onClick:()=>d("completed"),children:"Completed"})]})]}),e.jsx(N,{orders:v(),isLoading:o,isTailorView:!0,onOrderUpdate:p})]})]})};export{C as default};
