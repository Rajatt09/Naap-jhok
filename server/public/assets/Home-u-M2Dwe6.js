import{j as e,L as R,F as A,a as n,u as I,r as o}from"./index-D1PmyStg.js";import{g as y}from"./tailors-ClCv5F0q.js";import{g as O}from"./locations-CZUDh4h-.js";const G=({tailors:t,isLoading:a})=>a?e.jsx(R,{}):t.length===0?e.jsx("div",{className:"no-tailors",children:e.jsx("p",{children:"No tailors found. Try adjusting your search criteria."})}):e.jsx("div",{className:"tailor-list grid grid-cols-1 grid-cols-sm-2 grid-cols-md-3",children:t.map(s=>{var d,l;return e.jsxs("div",{className:"tailor-card card fade-in",children:[e.jsxs("div",{className:"tailor-card-header",children:[s.avatar?e.jsx("img",{src:s.avatar,alt:((d=s.userId)==null?void 0:d.name)||"Unknown Tailor",className:"tailor-avatar"}):e.jsx(A,{size:48,color:"#999",className:"tailor-avatar"}),e.jsxs("div",{className:"tailor-header-content",children:[e.jsx("h3",{className:"tailor-name",children:((l=s.userId)==null?void 0:l.name)||"No Name"}),e.jsxs("div",{className:"tailor-rating",children:[e.jsxs("span",{className:"stars",children:[s.rating," ★"]}),e.jsxs("span",{className:"review-count",children:["(",s.reviewCount," reviews)"]})]}),e.jsx("div",{className:"tailor-price-range",children:s.priceRange||"N/A"})]})]}),e.jsxs("div",{className:"tailor-card-body",style:{marginTop:"10px"},children:[e.jsxs("div",{className:"tailor-services",children:[s.servicesOffered.slice(0,4).map((h,c)=>e.jsx("span",{className:"tailor-service-tag",children:h},c)),s.servicesOffered.length>4&&e.jsxs("span",{className:"tailor-service-tag more",children:["+",s.servicesOffered.length-4," more"]})]}),e.jsxs("div",{className:"tailor-location",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsxs("span",{children:[s.shopAddress," ",e.jsx("br",{}),s.area]})]})]}),e.jsxs("div",{className:"tailor-card-footer",children:[e.jsx(n,{to:`/tailor/${s._id}`,className:"btn btn-primary",children:"View Profile"}),e.jsx(n,{to:`/order/new?tailorId=${s._id}`,className:"btn btn-outline",children:"Book Now"})]})]},s._id)})});function D(t,a,s,d){const l=p=>p*Math.PI/180,c=l(s-t),N=l(d-a),m=Math.sin(c/2)**2+Math.cos(l(t))*Math.cos(l(s))*Math.sin(N/2)**2;return 6371*(2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m)))}const q=()=>{const{isAuthenticated:t,currentUser:a}=I(),[s,d]=o.useState([]),[l,h]=o.useState(!1),[c,N]=o.useState(""),[m,g]=o.useState(6),[p,T]=o.useState([]),[L,k]=o.useState([]),[u,S]=o.useState("");o.useEffect(()=>{(async()=>{try{h(!0);let r=[];if(u){const{lat:x,lng:j}=await O();console.log("User Location (fetched):",x,j),r=(await y()).filter(v=>{var b,w;return!((b=v.location)!=null&&b.lat)||!((w=v.location)!=null&&w.lng)?!1:D(x,j,v.location.lat,v.location.lng)<=Number(u)})}else r=await y();console.log("tailors are : ",r),T(r),k(r.slice(0,m))}catch(r){console.error("Error fetching tailors:",r)}finally{h(!1)}})()},[u]);const C=L.filter(i=>{var r,x,j;return((x=(r=i.userId)==null?void 0:r.name)==null?void 0:x.toLowerCase().includes(c.toLowerCase()))||((j=i.shopAddress)==null?void 0:j.toLowerCase().includes(c.toLowerCase()))||i.servicesOffered.some(f=>f.toLowerCase().includes(c.toLowerCase()))}),M=()=>{g(i=>i+6)};return e.jsxs("div",{className:"home-page",children:[e.jsx("section",{className:"hero-section",children:e.jsxs("div",{className:"hero-content",children:[(a==null?void 0:a.role)!="tailor"?e.jsx("h1",{className:"slide-up",children:"Find the Perfect Tailor Near You"}):e.jsx("h1",{className:"slide-up",children:"Grow Your Tailoring Business"}),(a==null?void 0:a.role)!="tailor"?e.jsx("p",{className:"slide-up",children:"Quality stitching, custom fits, and convenient delivery options"}):e.jsx("p",{className:"slide-up",children:"Manage orders, connect with customers, and streamline your workflow"}),t?e.jsx(n,{to:"/dashboard",className:"btn btn-primary slide-up",children:"Go to Dashboard"}):e.jsxs("div",{className:"hero-buttons slide-up",children:[e.jsx(n,{to:"/login",className:"btn btn-primary",children:"Get Started"}),e.jsx(n,{to:"/signup",className:"btn btn-outline",children:"Join as Tailor"})]})]})}),e.jsx("section",{className:"features-section",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:"How It Works"}),e.jsxs("div",{className:"features-grid",children:[e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"🔍"}),e.jsx("h3",{children:"Find Tailors"}),e.jsx("p",{children:"Discover skilled tailors within 4km of your location"})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"✂️"}),e.jsx("h3",{children:"Place Order"}),e.jsx("p",{children:"Share your measurements and clothing requirements"})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"👕"}),e.jsx("h3",{children:"Get Stitched"}),e.jsx("p",{children:"Tailors work on your order with quality craftsmanship"})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("div",{className:"feature-icon",children:"🚚"}),e.jsx("h3",{children:"Delivery Options"}),e.jsx("p",{children:"Choose between pickup or home delivery"})]})]})]})}),(a==null?void 0:a.role)!="tailor"&&e.jsx("section",{className:"nearby-tailors-section",children:e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"Tailors Near You"}),e.jsxs("div",{className:"search-container",children:[e.jsx("input",{type:"text",placeholder:"Search by name or service...",value:c,onChange:i=>N(i.target.value),className:"search-input"}),e.jsx("div",{className:"search-divider",children:"OR"}),e.jsx("label",{htmlFor:"range-select",className:"range-label",children:"Search Nearby:"}),e.jsxs("select",{id:"range-select",value:u,onChange:i=>S(i.target.value),className:"range-select",children:[e.jsx("option",{value:"",children:"Select Range"}),e.jsx("option",{value:"2",children:"2 km"}),e.jsx("option",{value:"4",children:"4 km"}),e.jsx("option",{value:"8",children:"8 km"}),e.jsx("option",{value:"10",children:"10 km"})]})]})]}),e.jsx(G,{tailors:C,isLoading:l}),e.jsxs("div",{className:"view-all-container",children:[m<p.length&&e.jsx(n,{onClick:M,className:"btn btn-outline",children:"View More"}),e.jsx(n,{to:"/tailors_in_range",className:"btn btn-outline",children:"View Tailors on map"})]})]})}),e.jsx("section",{className:"testimonials-section",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:"What Our Users Say"}),e.jsxs("div",{className:"testimonials-grid",children:[e.jsxs("div",{className:"testimonial-card",children:[e.jsx("div",{className:"testimonial-rating",children:"★★★★★"}),e.jsx("p",{children:'"Found an amazing tailor who made the perfect wedding outfit for me. The process was so smooth!"'}),e.jsx("div",{className:"testimonial-author",children:"- Priya S."})]}),e.jsxs("div",{className:"testimonial-card",children:[e.jsx("div",{className:"testimonial-rating",children:"★★★★★"}),e.jsx("p",{children:'"As a tailor, this platform has helped me reach more customers. My business has grown significantly!"'}),e.jsx("div",{className:"testimonial-author",children:"- Raj M., Professional Tailor"})]}),e.jsxs("div",{className:"testimonial-card",children:[e.jsx("div",{className:"testimonial-rating",children:"★★★★☆"}),e.jsx("p",{children:'"Great service, love the order tracking. Being able to choose delivery options is very convenient."'}),e.jsx("div",{className:"testimonial-author",children:"- Aisha K."})]})]})]})}),e.jsx("section",{className:"cta-section",children:e.jsxs("div",{className:"container",children:[e.jsx("h2",{children:"Ready to Get Started?"}),e.jsx("p",{children:"Join thousands of users finding the perfect fit"}),t?e.jsx(n,{to:"/dashboard",className:"btn btn-primary",children:"Go to Dashboard"}):e.jsxs("div",{className:"cta-buttons",children:[e.jsx(n,{to:"/signup",className:"btn btn-primary",children:"Sign Up Now"}),e.jsx(n,{to:"/login",className:"btn btn-outline",children:"Log In"})]})]})})]})};export{D as calculateDistance,q as default};
