import{r as j,j as s,a as p}from"./index-D1PmyStg.js";import{u}from"./orders-lTb7AU2X.js";const x=({status:i})=>{let t="",a="";switch(i){case"placed":t="status-placed",a="Placed";break;case"accepted":t="status-accepted",a="Accepted";break;case"in-progress":t="status-in-progress",a="In Progress";break;case"ready":t="status-ready",a="Ready";break;case"delivered":t="status-delivered",a="Delivered";break;case"rejected":t="status-rejected",a="Rejected";break;default:t="status-placed",a="Placed"}return s.jsx("span",{className:`status-pill ${t}`,children:a})},o=({orders:i,isLoading:t,isTailorView:a=!1,onOrderUpdate:m})=>{const[c,h]=j.useState(new Set),n=async(e,d)=>{try{h(r=>new Set([...r,e]));const l=await u(e,d);m&&m(l)}catch{alert("Failed to update order status")}finally{h(l=>{const r=new Set(l);return r.delete(e),r})}};return t?s.jsxs("div",{className:"loading-container",children:[s.jsx("span",{className:"loading-spinner"}),s.jsx("p",{children:"Loading orders..."})]}):(i==null?void 0:i.length)===0?s.jsxs("div",{className:"empty-orders",children:[s.jsx("div",{className:"empty-icon",children:"ğŸ“‹"}),s.jsx("h3",{children:"No orders yet"}),s.jsx("p",{children:a?"You haven't received any orders yet. When customers place orders, they'll appear here.":"You haven't placed any orders yet. Find a tailor to get started!"}),!a&&s.jsx(p,{to:"/",className:"btn btn-primary",children:"Find Tailors"})]}):s.jsx("div",{className:"order-list",children:i==null?void 0:i.map(e=>s.jsxs("div",{className:"order-item fade-in",children:[s.jsxs("div",{className:"order-header",children:[s.jsxs("div",{className:"order-id",children:[s.jsx("span",{className:"order-label",children:"Order #"}),s.jsx("span",{className:"order-value",children:e._id.slice(-8)})]}),s.jsx(x,{status:e.status})]}),s.jsxs("div",{className:"order-summary",children:[s.jsx("div",{className:"order-details",children:e.items.map((d,l)=>s.jsxs("div",{className:"order-item-detail",children:[s.jsx("span",{className:"item-description",children:d.description}),s.jsxs("span",{className:"item-price",children:["â‚¹",d.price]})]},l))}),s.jsxs("div",{className:"order-meta",children:[s.jsxs("div",{className:"meta-item",children:[s.jsx("span",{className:"meta-label",children:"Date:"}),s.jsx("span",{className:"meta-value",children:new Date(e.createdAt).toLocaleDateString()})]}),s.jsxs("div",{className:"meta-item",children:[s.jsx("span",{className:"meta-label",children:"Delivery:"}),s.jsx("span",{className:"meta-value",children:e.deliveryOption==="home_delivery"?"Home Delivery":"Pickup"})]}),s.jsxs("div",{className:"meta-item",children:[s.jsx("span",{className:"meta-label",children:"Payment:"}),s.jsx("span",{className:"meta-value",children:e.paymentMethod==="cash"?"Cash":"UPI"})]}),s.jsxs("div",{className:"meta-item total",children:[s.jsx("span",{className:"meta-label",children:"Total:"}),s.jsxs("span",{className:"meta-value",children:["â‚¹",e.price]})]})]})]}),s.jsxs("div",{className:"order-footer",children:[s.jsx(p,{to:`/order/${e._id}`,className:"btn btn-primary btn-sm",children:"View Details"}),a&&e.status==="placed"&&s.jsxs("div",{className:"tailor-actions",children:[s.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>n(e._id,"accepted"),disabled:c.has(e._id),children:c.has(e._id)?"Accepting...":"Accept"}),s.jsx("button",{className:"btn btn-error btn-sm",onClick:()=>n(e._id,"rejected"),disabled:c.has(e._id),children:c.has(e._id)?"Rejecting...":"Reject"})]}),a&&e.status==="accepted"&&s.jsx("button",{className:"btn btn-secondary btn-sm",onClick:()=>n(e._id,"in-progress"),disabled:c.has(e._id),children:c.has(e._id)?"Updating...":"Mark as In Progress"}),a&&e.status==="in-progress"&&s.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>n(e._id,"ready"),disabled:c.has(e._id),children:c.has(e._id)?"Updating...":"Mark as Ready"}),a&&e.status==="ready"&&s.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>n(e._id,"delivered"),disabled:c.has(e._id),children:c.has(e._id)?"Updating...":"Mark as Delivered"})]})]},e._id))})};export{o as O};
