import{u as p,r as a,j as s,L as N,a as x}from"./index-CJV30WCN.js";import{O as m}from"./Dashboard-D51m91It.js";import{g as f}from"./orders-ByYhEa-D.js";const y=()=>{const{currentUser:d}=p(),[t,u]=a.useState([]),[i,n]=a.useState(!0),[l,o]=a.useState("active"),[h,v]=a.useState(null);a.useEffect(()=>{(async()=>{try{n(!0);const r=await f();u(r)}catch(r){v(r)}finally{n(!1)}})()},[]);const c=t.filter(e=>!["delivered","rejected"].includes(e.status)),j=t.filter(e=>["delivered","rejected"].includes(e.status));return i?s.jsx(N,{}):s.jsxs("div",{className:"dashboard-container",children:[s.jsxs("div",{className:"dashboard-header",children:[s.jsxs("h1",{children:["Welcome, ",d==null?void 0:d.name]}),s.jsx("p",{className:"subtitle",children:"Manage your orders and find tailors"})]}),h&&s.jsx("div",{className:"alert alert-error",role:"alert",children:h}),s.jsxs("div",{className:"dashboard-stats",children:[s.jsxs("div",{className:"stat-card",children:[s.jsx("h3",{children:c.length}),s.jsx("p",{children:"Active Orders"})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("h3",{children:j.length}),s.jsx("p",{children:"Completed Orders"})]}),s.jsxs("div",{className:"stat-card",children:[s.jsxs("h3",{children:["â‚¹",t.reduce((e,r)=>e+r.price,0)]}),s.jsx("p",{children:"Total Spent"})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("h3",{children:t.filter(e=>e.status==="delivered").length}),s.jsx("p",{children:"Successful Orders"})]})]}),s.jsxs("div",{className:"quick-actions",children:[s.jsxs(x,{to:"/",className:"action-card",children:[s.jsx("div",{className:"action-icon",children:"ðŸ”"}),s.jsx("span",{children:"Find Tailors"})]}),s.jsxs(x,{to:"/profile",className:"action-card",children:[s.jsx("div",{className:"action-icon",children:"ðŸ‘¤"}),s.jsx("span",{children:"My Profile"})]})]}),s.jsxs("div",{className:"dashboard-section",children:[s.jsxs("div",{className:"section-header with-tabs",children:[s.jsx("h2",{children:"My Orders"}),s.jsxs("div",{className:"tabs",children:[s.jsxs("button",{className:`tab ${l==="active"?"active":""}`,onClick:()=>o("active"),children:["Active Orders",c.length>0&&s.jsx("span",{className:"badge",children:c.length})]}),s.jsx("button",{className:`tab ${l==="completed"?"active":""}`,onClick:()=>o("completed"),children:"Completed"})]})]}),l==="active"?s.jsx(m,{orders:c,isLoading:i}):s.jsx(m,{orders:j,isLoading:i})]})]})};export{y as default};
